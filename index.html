<script>
  async function getWeather() {
    const city = document.getElementById("cityInput").value;

    try {
      const res = await fetch(`https://weather-dashboard-9glj.onrender.com/weather?city=${city}`);
      const data = await res.json();

      console.log("Response from FastAPI:", data);

      if (data.error) {
        document.getElementById("result").innerHTML = `<p style="color:red;">${data.error}</p>`;
      } else {
        document.getElementById("result").innerHTML = `
          <h2>${city}</h2>
          <img src="${data.icon}" alt="Weather icon">
          <p>🌡️ Temperature: ${data.temperature}°C</p>
          <p>☁️ ${data.description}</p>
          <p>💧 Humidity: ${data.humidity}%</p>
        `;
      }
    } catch (err) {
      console.error("Error fetching weather data:", err);
      document.getElementById("result").innerHTML = `<p style="color:red;">Something went wrong. Please try again.</p>`;
    }
  }
</script>
